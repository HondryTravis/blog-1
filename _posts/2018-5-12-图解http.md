---
layout: post
title:  图解http总结
categories: [http, book]
---

最近阅读完图解http，扫盲了一次http基础，在此写一下总结。

## 了解web及网络基础


### TCP/IP架构

|应用层|http|生成基于目标服务器的http请求报文|
|传输层|tcp|为了方便通信，将http请求报文分割成报文段|
|网络层|ip|搜索对方的地址，一边中转一边传送|
|数据链路层|网络|处理请求|


## 简单的http协议

http是无状态的协议

### 请求报文
请求报文是由请求方法、请求URI、协议版本、可选的请求首部字段和内容实体构成。
### 响应报文
响应报文是由协议版本、状态码、状态码短语、可选的响应首部字段以及实体主体构成。

### 常用的请求方法

* GET 获取资源
* POST 传输实体的主体
* PUT 传输文件
* HEAD 获得报文首部（类似get，不返回报文实体）
* DELETE 删除文件
* OPTIONs 询问支持的方法
* TRACE 追踪路径（让服务器将之前的请求通信返回给客户端）
* CONNECT 要求用隧道协议连接代理（主要使用SSL）

### 持久化链接

持久连接keep-live，串行输入，第二个请求需等待第一个请求响应完才能执行。

|建立TCP连接|
|请求1----->|
|<-----响应1|
|请求2----->|
|<-----响应2|
|关闭TCP连接|

管线化，多个请求可同时发出，不需等待。

|建立TCP连接|
|请求1----->|
|请求2----->|
|<-----响应1|
|<-----响应2|
|关闭TCP连接|


## http报文内的http信息

### http报文

|报文首部|
|空行（CR+LF）|
|报文主体|




## 返回结果的http状态码

* 200 OK 请求成功
* 204 No Content 请求处理成功，但没有资源返回
* 206 Partial Content 请求到资源的一部分
* 301 Move Permanently 永久重定向
* 302 Found临时重定向
* 303 See Other 临时重定向，采用get方法
* 304 Not Modified 没有改变
* 307 Temporary Redirect 临时重定向，采用之前的方法，不会强制使用get方法
* 400 Bad Request 请求报文中存在语法错误
* 401 Unauthorized 发送的请求需要有认证信息
* 403 Forbidden 请求的资源被服务器拒绝
* 404 Not Found 没有找到对应资源
* 500 Internal Server Error 服务器端报错
* 503 Service Unavaliable 服务器超负载或在维护

## 与http协作的web服务器

### 通信数据转发程序：

代理

转发客户端请求到服务器，或转发服务器响应到客户端。

网关

转发服务器通讯的服务器，可以处理请求，客户端不易察觉，可冒充服务器。可使用非http协议通讯。

隧道

与服务器建立一条通讯线路，确保安全通信。


## http首部

首部字段

为了给浏览器和服务器提供报文主体大小，所使用的语言，认证信息等

请求报文首部：方法，uri，http版本，请求首部字段，通用首部字段，实体首部字段

响应报文首部：http版本，状态码，响应首部字段，通用首部字段，实体首部字段

### 通用首部字段

|CaChe-Control|控制缓存机制|
|Connection|控制不再转发的首部字段，管理持久连接|
|Date|创建http报文的时间|
|Trailer|事先说明报文主体后包含的首部字段|
|Transfer-Encoding|传输报文采用的编码方式|
|Upgrade|检测http协议以及其他协议是否可使用更高的版本进行通信|
|Via|追踪客户端和服务器之间的请求和响应报文的传输路径|
|Warning|告知客户缓存相关的问题警告|

### 请求首部字段

|Accept|通知服务器，用户代理能够处理的媒体类型以及媒体类型的优先级|
|Accept-Charset|通知服务器，用户代理支持的字符集以及字符集的优先级|
|Accept-Encoding|通知服务器，用户代理支持的内容编码以及内容编码的优先级|
|Accept-Language|通知服务器，用户代理能够处理的自然语言集，以及优先级|
|Authorization|通知服务器，用户代理的认证信息|
|Except|通知服务器，期望出现的某种特定行为，如服务器不理解，返回417|
|From|通知服务器，用户代理的电子邮箱|
|Host|通知服务器，请求资源的主机名和端口号，用于一台服务器多个web服务|
|If-Match|...|

## 确保web安全的https

## 确认访问用户身份认证

## 基于http的功能追加协议

## 构建web内容的技术

## web的攻击技术

